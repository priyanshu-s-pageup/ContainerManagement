<div class="card">
  <h3>Order details</h3>

  <div class="form-grid">
    <!-- Column 1: AWB prefix+suffix -->
    <div class="form-group awb-group example-form col-1">
      <div class="awb-input validator example-full-width">
        <mat-form-field appearance="fill" class="example-full-width">
          <input matInput id="awb-prefix" type="text" inputmode="numeric" [value]="awbPrefix" (input)="onAwbPrefixInput($event)" />
        </mat-form-field>
        <span class="awb-separator">-</span>
        <mat-form-field appearance="fill" class="example-full-width">
          <input matInput type="text" inputmode="numeric" [value]="awbSuffix" (input)="onAwbSuffixInput($event)" />
        </mat-form-field>
      </div>
    </div>
    <!-- Column 2: AWB Org -->
    <div class="form-group validator example-form col-2">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>AWB Org</mat-label>
        <input matInput placeholder="" (input)="onCodeControlInput(awbOrgControl, $event)" [formControl]="awbOrgControl" [errorStateMatcher]="errorStateMatcher" />
        
        @if (awbOrgControl.hasError('required')) {
          <mat-error>AWB Org is <strong>required</strong></mat-error>
        }
      </mat-form-field>
    </div>
    <!-- Column 3: AWB Dest -->
    <div class="form-group validator example-form col-3">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>AWB Dest</mat-label>
        <input matInput placeholder="" (input)="onCodeControlInput(awbDestControl, $event)" [formControl]="awbDestControl" [errorStateMatcher]="errorStateMatcher" />

        @if (awbDestControl.hasError('required')) {
          <mat-error>AWB Dest is <strong>required</strong></mat-error>
        }
      </mat-form-field>
    </div>
    <!-- Column 1: Customer Pickup Port -->
    <div class="form-group validator example-form col-1">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Customer Pickup Port</mat-label>
        <input matInput placeholder="" (input)="onCodeControlInput(pickupPortControl, $event)" [formControl]="pickupPortControl" [errorStateMatcher]="errorStateMatcher" />

        @if (pickupPortControl.hasError('required')) {
          <mat-error>Pickup Port is <strong>required</strong></mat-error>
        }
      </mat-form-field>
    </div>
    <!-- Column 2: Planned Lease Start -->
    <div class="form-group validator example-form col-2">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Planned Lease Start</mat-label>
        <input matInput [matDatepicker]="leaseStartPicker" [formControl]="leaseStartControl" [matDatepickerFilter]="leaseStartFilter" [min]="minStartDateValue" placeholder="dd MM YY HH:mm">
        <mat-hint>dd MM YY HH:mm</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="leaseStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #leaseStartPicker></mat-datepicker>
        @if (leaseStartControl.hasError('required')) { <mat-error>Planned lease start is <strong>required</strong></mat-error> }
      </mat-form-field>
    </div>
    <!-- Column 3: UTC Start -->
    <div class="form-group validator example-form col-3">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>UTC Start</mat-label>
        <input matInput [matDatepicker]="utcStartPicker" [formControl]="utcStartDateControl" readonly>
        <mat-hint>ISO string (UTC)</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="utcStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #utcStartPicker></mat-datepicker>
      </mat-form-field>
    </div>
    <!-- Column 1: Pickup Location -->
    <div class="form-group validator example-form col-1">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Pickup Location</mat-label>
        <mat-select [(value)]="pickupLocation">
          <mat-option value="">None</mat-option>
          <mat-option value="terminal1">Terminal</mat-option>
          <mat-option value="terminal2">Compound Lodge</mat-option>
          <mat-option value="warehouse">Warehouse</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <!-- Span Columns 2-3: Booked Rental Days -->
    <div class="form-group validator example-form col-2-3">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Booked Rental Days</mat-label>
        <input matInput type="number" placeholder="" min="1" step="1" [formControl]="bookedRentalDaysControl" (change)="onBookedDaysChange()" [errorStateMatcher]="errorStateMatcher" />
         
        @if (bookedRentalDaysControl.hasError('min') && !bookedRentalDaysControl.hasError('required')) {
          <mat-error>Minimum is 1 day</mat-error>
        }
        @if (bookedRentalDaysControl.hasError('required')) {
          <mat-error>Booked rental days is <strong>required</strong></mat-error>
        }
      </mat-form-field>
    </div>
    <!-- Column 1: Customer Return Port -->
    <div class="form-group validator example-form col-1">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Customer Return Port</mat-label>
        <input matInput placeholder="" (input)="onCodeControlInput(returnPortControl, $event)" [formControl]="returnPortControl" [errorStateMatcher]="errorStateMatcher" />
         
        @if (returnPortControl.hasError('pattern') && !returnPortControl.hasError('required')) {
          <mat-error>Use three letters, e.g. "MAA"</mat-error>
        }
        @if (returnPortControl.hasError('required')) {
          <mat-error>Return Port is <strong>required</strong></mat-error>
        }
      </mat-form-field>
    </div>
    <!-- Column 2: Planned Lease End -->
    <div class="form-group validator example-form col-2">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>Planned Lease End</mat-label>
        <input matInput [matDatepicker]="leaseEndPicker" [formControl]="leaseEndControl" [matDatepickerFilter]="leaseEndFilter" [min]="minEndDateValue" [max]="maxEndDateValue" placeholder="dd MM YY HH:mm">
        <mat-hint>dd MM YY HH:mm</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="leaseEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #leaseEndPicker></mat-datepicker>
        @if (leaseEndControl.hasError('required')) { <mat-error>Planned lease end is <strong>required</strong></mat-error> }
      </mat-form-field>
    </div>
    <!-- Column 3: UTC End -->
    <div class="form-group validator example-form col-3">
      <mat-form-field appearance="fill" class="example-full-width">
        <mat-label>UTC End</mat-label>
        <input matInput [matDatepicker]="utcEndPicker" [formControl]="utcEndDateControl" readonly>
        <mat-hint>ISO string (UTC)</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="utcEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #utcEndPicker></mat-datepicker>
      </mat-form-field>
    </div>
  </div>
</div>
